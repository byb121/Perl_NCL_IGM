#!/usr/bin/perl
use strict;
use warnings;
use Getopt::Long;

my $vcf_files;
my $reference_file;
my $targets_file;
my $output_file;

my $help;
usage() if ( @ARGV < 1 || ! GetOptions('help|?' => \$help, 'vcfs=s' => \$vcf_files, 'ref=s' => \$reference_file, 'target=s' => \$targets_file, 'output=s' => \$output_file) || defined $help );

print "WARNING: Please ensure enough RAM if process large VCF files\n";
#get the target region
my %Targetregions;
open (TARGET, $targets_file) || die "Target file not found: $targets_file\n";
while (<TARGET>) {
	chomp($_);
	my @targsplit = split(/\t/, $_);
	my $chr = $targsplit[0];
	my $start= $targsplit[1];
	my $end = $targsplit[2];
	$Targetregions{$chr}{$start}{$end} = 1; 
}
close TARGET;
#get the reference genome



#get the VCF files
my @vcfs=split(',', $vcf_files);
#choose which sample to use and get the column number
	# use sample names compare to the column names
#process VCF add Frequency of Ref and Var together
	#if the position is on target region
	#if the ref is the same as reference
	#if the var is the same as reference
	#add % ref frequency together and find the mean
#output table


sub usage {
    print "Unknown option: @_\n" if ( @_ );
    print "\nusage: ProduceRefSet4SensAndSpec.pl [--vcfs 1.vcf,2.vcf,...] [--ref /Path/of/hg19.fa] [--target /Path/to/target_region.bed] [--output /Path/to/output.txt] [--help|-?]\n\n";
	return(1);
}